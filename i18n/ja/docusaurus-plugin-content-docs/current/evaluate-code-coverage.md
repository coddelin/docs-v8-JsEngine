---
title: &apos;コードカバレッジの評価&apos;
description: &apos;この文書は、V8での変更作業中に、そのコードカバレッジを評価する方法を説明します。&apos;
---
あなたは変更作業をしています。新しいコードのコードカバレッジを評価したいです。

V8はこれを行うための2つのツールを提供しています：ローカル（自分のマシン上）とビルドインフラストラクチャのサポート。

## ローカル

v8リポジトリのルートに対して、`./tools/gcov.sh`を使用します（Linuxでテスト済み）。これはGNUのコードカバレッジツールといくつかのスクリプトを使用してHTMLレポートを生成し、ディレクトリ、ファイル、コードの行ごとのカバレッジ情報を詳細に確認することができます。

スクリプトは`gcov`設定を使用して、別の`out`ディレクトリの下にV8をビルドします。通常のビルド設定を壊さないように、別のディレクトリを使用します。この別のディレクトリは`cov`と呼ばれ、リポジトリのルート配下に作成されます。`gcov.sh`はテストスイートを実行し、レポートを生成します。スクリプトが完了するとレポートへのパスが提供されます。

変更にアーキテクチャ固有のコンポーネントがある場合、アーキテクチャ固有の実行から累積的にカバレッジを収集することができます。

```bash
./tools/gcov.sh x64 arm
```

これは各アーキテクチャごとにその場で再ビルドし、前回の実行からのバイナリを上書きしますが、カバレッジ結果は保存および蓄積されます。

デフォルトでは、スクリプトは`Release`ランから収集します。`Debug`を指定したい場合は、明示的に指定できます：

```bash
BUILD_TYPE=Debug ./tools/gcov.sh x64 arm arm64
```

オプションなしでスクリプトを実行すると、利用可能なオプションの概要が提供されます。

## コードカバレッジボット

適用された各変更について、x64カバレッジ分析を実行します — [カバレッジボット](https://ci.chromium.org/p/v8/builders/luci.v8.ci/V8%20Linux64%20-%20gcov%20coverage)をご覧ください。他のアーキテクチャのカバレッジについてはボットを実行していません。

特定の実行のレポートを取得するには、ビルドステップをリスト化し、「gsutil coverage report」（終盤近く）を探し、その下の「report」を開きます。
