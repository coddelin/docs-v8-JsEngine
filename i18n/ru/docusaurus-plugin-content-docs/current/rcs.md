---
title: "Статистика вызовов времени выполнения"
description: "Этот документ объясняет, как использовать статистику вызовов времени выполнения для получения подробных внутренних метрик V8."
---
[Панель производительности DevTools](https://developers.google.com/web/tools/chrome-devtools/evaluate-performance/) предоставляет информацию о производительности выполнения вашего веб-приложения, визуализируя различные внутренние метрики Chrome. Однако некоторые низкоуровневые метрики V8 в настоящее время не отображаются в DevTools. Эта статья объясняет наиболее надежный способ получения подробных внутренних метрик V8, известных как Статистика вызовов времени выполнения или RCS, через `chrome://tracing`.

Трассировка записывает поведение всего браузера, включая другие вкладки, окна и расширения, поэтому она работает лучше всего при выполнении в чистом профиле пользователя, с отключенными расширениями и без открытых вкладок браузера:

```bash
# Запустите новую сессию браузера Chrome с чистым профилем пользователя и отключенными расширениями
google-chrome --user-data-dir="$(mktemp -d)" --disable-extensions
```

Введите URL страницы, которую вы хотите измерить, в первую вкладку, но пока не загружайте страницу.

![](/_img/rcs/01.png)

Добавьте вторую вкладку и откройте `chrome://tracing`. Совет: можно просто ввести `chrome:tracing` без слэшей.

![](/_img/rcs/02.png)

Нажмите кнопку «Записать», чтобы подготовиться к записи трассировки. Сначала выберите «Веб-разработчик», затем выберите «Редактировать категории».

![](/_img/rcs/03.png)

Выберите `v8.runtime_stats` из списка. В зависимости от того, насколько детализировано ваше исследование, вы можете выбрать и другие категории.

![](/_img/rcs/04.png)

Нажмите «Записать» и переключитесь обратно на первую вкладку, затем загрузите страницу. Самый быстрый способ — использовать <kbd>Ctrl</kbd>/<kbd>⌘</kbd>+<kbd>1</kbd>, чтобы напрямую перейти к первой вкладке, а затем нажать <kbd>Enter</kbd>, чтобы подтвердить введенный URL.

![](/_img/rcs/05.png)

Дождитесь завершения загрузки страницы или заполнения буфера, затем «Остановите» запись.

![](/_img/rcs/06.png)

Найдите раздел «Рендерер», который содержит название веб-страницы из записанной вкладки. Самый простой способ сделать это — нажать «Процессы», затем нажать «Нет», чтобы снять отметку со всех записей, и затем выбрать только интересующий вас рендерер.

![](/_img/rcs/07.png)

Выберите события трассировки/срезы, нажав <kbd>Shift</kbd> и перетащив. Убедитесь, что вы покрыли _все_ разделы, включая `CrRendererMain` и любые `ThreadPoolForegroundWorker`. Внизу появится таблица с выбранными срезами.

![](/_img/rcs/08.png)

Прокрутите таблицу до верхнего правого угла и нажмите на ссылку рядом с «Таблицей статистики вызовов времени выполнения».

![](/_img/rcs/09.png)

В появившемся представлении прокрутите вниз, чтобы увидеть подробную таблицу, где V8 тратит свое время.

![](/_img/rcs/10.png)

Раскрывая категорию, вы можете углубиться в данные.

![](/_img/rcs/11.png)

## Интерфейс командной строки

Запустите [`d8`](/docs/d8) с параметром `--runtime-call-stats`, чтобы получить метрики RCS из командной строки:

```bash
d8 --runtime-call-stats foo.js
```
