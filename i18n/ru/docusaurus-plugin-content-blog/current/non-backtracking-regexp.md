---
title: '–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –º–µ—Ö–∞–Ω–∏–∑–º RegExp –±–µ–∑ –æ–±—Ä–∞—Ç–Ω–æ–≥–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è'
author: '–ú–∞—Ä—Ç–∏–Ω –ë–∏–¥–ª–∏–Ω–≥–º–∞–π–µ—Ä'
date: 2021-01-11
tags:
 - internals
 - RegExp
description: 'V8 —Ç–µ–ø–µ—Ä—å –∏–º–µ–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –º–µ—Ö–∞–Ω–∏–∑–º RegExp, –∫–æ—Ç–æ—Ä—ã–π —Å–ª—É–∂–∏—Ç —Ä–µ–∑–µ—Ä–≤–Ω—ã–º –∏ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–æ —Å–ª—É—á–∞–µ–≤ –∫–∞—Ç–∞—Å—Ç—Ä–æ—Ñ–∏—á–µ—Å–∫–æ–≥–æ –æ–±—Ä–∞—Ç–Ω–æ–≥–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è.'
tweet: '1348635270762139650'
---
–ù–∞—á–∏–Ω–∞—è —Å –≤–µ—Ä—Å–∏–∏ v8.8, V8 –ø–æ—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è —Å –Ω–æ–≤—ã–º —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–ª—å–Ω—ã–º –º–µ—Ö–∞–Ω–∏–∑–º–æ–º RegExp –±–µ–∑ –æ–±—Ä–∞—Ç–Ω–æ–≥–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è (–≤ –¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–º—É [–¥–≤–∏–∂–∫—É Irregexp](https://blog.chromium.org/2009/02/irregexp-google-chromes-new-regexp.html)), –∫–æ—Ç–æ—Ä—ã–π –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞ –ª–∏–Ω–µ–π–Ω–æ–µ –≤—Ä–µ–º—è –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ —Ä–∞–∑–º–µ—Ä–∞ –≤—Ö–æ–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏. –≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–ª—å–Ω—ã–π –º–µ—Ö–∞–Ω–∏–∑–º –¥–æ—Å—Ç—É–ø–µ–Ω –∑–∞ —Ñ–ª–∞–≥–∞–º–∏ —Ñ—É–Ω–∫—Ü–∏–π, —É–ø–æ–º—è–Ω—É—Ç—ã–º–∏ –Ω–∏–∂–µ.

<!--truncate-->
![–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è `/(a*)*b/.exec('a'.repeat(n))` –¥–ª—è n ‚â§ 100](/_img/non-backtracking-regexp/runtime-plot.svg)

–í–æ—Ç –∫–∞–∫ –≤—ã –º–æ–∂–µ—Ç–µ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –Ω–æ–≤—ã–π –º–µ—Ö–∞–Ω–∏–∑–º RegExp:

- `--enable-experimental-regexp_engine-on-excessive-backtracks` –≤–∫–ª—é—á–∞–µ—Ç —Ä–µ–∑–µ—Ä–≤–Ω—ã–π –º–µ—Ö–∞–Ω–∏–∑–º –±–µ–∑ –æ–±—Ä–∞—Ç–Ω–æ–≥–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –ø—Ä–∏ –∏–∑–±—ã—Ç–æ—á–Ω—ã—Ö –æ–±—Ä–∞—Ç–Ω—ã—Ö –ø–µ—Ä–µ—Ö–æ–¥–∞—Ö.
- `--regexp-backtracks-before-fallback N` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é N = 50 000) —É–∫–∞–∑—ã–≤–∞–µ—Ç, —Å–∫–æ–ª—å–∫–æ –æ–±—Ä–∞—Ç–Ω—ã—Ö –ø–µ—Ä–µ—Ö–æ–¥–æ–≤ —Å—á–∏—Ç–∞–µ—Ç—Å—è ¬´–∏–∑–±—ã—Ç–æ—á–Ω—ã–º–∏¬ª, —Ç–æ –µ—Å—Ç—å –∫–æ–≥–¥–∞ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Ä–µ–∑–µ—Ä–≤–Ω—ã–π –º–µ—Ö–∞–Ω–∏–∑–º.
- `--enable-experimental-regexp-engine` –≤–∫–ª—é—á–∞–µ—Ç —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –Ω–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–≥–æ —Ñ–ª–∞–≥–∞ `l` (¬´–ª–∏–Ω–µ–π–Ω—ã–π¬ª) –¥–ª—è —Ä–µ–≥—É–ª—è—Ä–Ω—ã—Ö –≤—ã—Ä–∞–∂–µ–Ω–∏–π, –Ω–∞–ø—Ä–∏–º–µ—Ä `/(a*)*b/l`. –†–µ–≥—É–ª—è—Ä–Ω—ã–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è, —Å–æ–∑–¥–∞–Ω–Ω—ã–µ —Å —ç—Ç–∏–º —Ñ–ª–∞–≥–æ–º, –≤—Å–µ–≥–¥–∞ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –Ω–æ–≤—ã–º –º–µ—Ö–∞–Ω–∏–∑–º–æ–º; Irregexp –≤–æ–æ–±—â–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è. –ï—Å–ª–∏ –Ω–æ–≤—ã–π –º–µ—Ö–∞–Ω–∏–∑–º RegExp –Ω–µ –º–æ–∂–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å —à–∞–±–ª–æ–Ω —Ä–µ–≥—É–ª—è—Ä–Ω–æ–≥–æ –≤—ã—Ä–∞–∂–µ–Ω–∏—è —Å —Ñ–ª–∞–≥–æ–º `l`, —Ç–æ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –≤—ã–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è –∏—Å–∫–ª—é—á–µ–Ω–∏–µ. –ú—ã –Ω–∞–¥–µ–µ–º—Å—è, —á—Ç–æ —ç—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –≤ –∫–∞–∫–æ–π-—Ç–æ –º–æ–º–µ–Ω—Ç –º–æ–∂–µ—Ç –±—ã—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∞ –¥–ª—è –ø–æ–≤—ã—à–µ–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π, –∫–æ—Ç–æ—Ä—ã–µ —Ä–∞–±–æ—Ç–∞—é—Ç —Å —Ä–µ–≥—É–ª—è—Ä–Ω—ã–º–∏ –≤—ã—Ä–∞–∂–µ–Ω–∏—è–º–∏ –¥–ª—è –Ω–µ–¥–æ–≤–µ—Ä–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö. –ü–æ–∫–∞ —Ñ—É–Ω–∫—Ü–∏—è –æ—Å—Ç–∞–µ—Ç—Å—è —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–ª—å–Ω–æ–π, —Ç–∞–∫ –∫–∞–∫ Irregexp –≤ —Ä–∞–∑—ã –±—ã—Å—Ç—Ä–µ–µ –Ω–æ–≤–æ–≥–æ –º–µ—Ö–∞–Ω–∏–∑–º–∞ –¥–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–Ω—ã—Ö —à–∞–±–ª–æ–Ω–æ–≤.

–†–µ–∑–µ—Ä–≤–Ω—ã–π –º–µ—Ö–∞–Ω–∏–∑–º –Ω–µ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∫–æ –≤—Å–µ–º —à–∞–±–ª–æ–Ω–∞–º. –ß—Ç–æ–±—ã —Ä–µ–∑–µ—Ä–≤–Ω—ã–π –º–µ—Ö–∞–Ω–∏–∑–º —Å—Ä–∞–±–æ—Ç–∞–ª, —Ä–µ–≥—É–ª—è—Ä–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ:

- –Ω–µ —Å–æ–¥–µ—Ä–∂–∞—Ç—å –æ–±—Ä–∞—Ç–Ω—ã—Ö —Å—Å—ã–ª–æ–∫,
- –Ω–µ —Å–æ–¥–µ—Ä–∂–∞—Ç—å –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã—Ö –∏–ª–∏ –ø–æ—Å–ª–µ–¥—É—é—â–∏—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫,
- –Ω–µ —Å–æ–¥–µ—Ä–∂–∞—Ç—å –±–æ–ª—å—à–∏—Ö –∏–ª–∏ –≥–ª—É–±–æ–∫–æ –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö –∫–æ–Ω–µ—á–Ω—ã—Ö –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–π, –∫–∞–∫, –Ω–∞–ø—Ä–∏–º–µ—Ä, –≤ `/a{200,500}/`, –∏
- –Ω–µ –∏–º–µ—Ç—å —Ñ–ª–∞–≥–æ–≤ `u` (Unicode) –∏–ª–∏ `i` (–Ω–µ—á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∫ —Ä–µ–≥–∏—Å—Ç—Ä—É).

## –ü—Ä–µ–¥—ã—Å—Ç–æ—Ä–∏—è: –∫–∞—Ç–∞—Å—Ç—Ä–æ—Ñ–∏—á–µ—Å–∫–æ–µ –æ–±—Ä–∞—Ç–Ω–æ–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ

–°–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ RegExp –≤ V8 –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –¥–≤–∏–∂–∫–æ–º Irregexp. Irregexp –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç —Ä–µ–≥—É–ª—è—Ä–Ω—ã–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è –≤ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ä–æ–¥–Ω–æ–π –∫–æ–¥ (–∏–ª–∏ –≤ [–±–∞–π—Ç–∫–æ–¥](/blog/regexp-tier-up)) –∏, —Ç–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, —á—Ä–µ–∑–≤—ã—á–∞–π–Ω–æ –±—ã—Å—Ç—Ä –¥–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ —à–∞–±–ª–æ–Ω–æ–≤. –û–¥–Ω–∞–∫–æ –¥–ª—è –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —à–∞–±–ª–æ–Ω–æ–≤ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è Irregexp –º–æ–∂–µ—Ç –≤–æ–∑—Ä–∞—Å—Ç–∞—Ç—å —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–æ –∫ —Ä–∞–∑–º–µ—Ä—É –≤—Ö–æ–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏. –ü—Ä–∏–º–µ—Ä –≤—ã—à–µ, `/(a*)*b/.exec('a'.repeat(100))`, –Ω–µ –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è –≤ —Ç–µ—á–µ–Ω–∏–µ –Ω–∞—à–µ–≥–æ –∂–∏–∑–Ω–µ–Ω–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏, –µ—Å–ª–∏ –µ–≥–æ –≤—ã–ø–æ–ª–Ω–∏—Ç Irregexp.

–¢–∞–∫ —á—Ç–æ –∂–µ –∑–¥–µ—Å—å –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç? Irregexp ‚Äî —ç—Ç–æ –¥–≤–∏–∂–æ–∫ *–æ–±—Ä–∞—Ç–Ω–æ–≥–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è*. –ö–æ–≥–¥–∞ —Å—Ç–∞–ª–∫–∏–≤–∞–µ—Ç—Å—è —Å –≤—ã–±–æ—Ä–æ–º, –∫–∞–∫ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ, Irregexp –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏—Å—Å–ª–µ–¥—É–µ—Ç –ø–µ—Ä–≤—ã–π –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç, –∞ –∑–∞—Ç–µ–º –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –Ω–∞–∑–∞–¥, –µ—Å–ª–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ, —á—Ç–æ–±—ã –∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç—å –≤—Ç–æ—Ä–æ–π –≤–∞—Ä–∏–∞–Ω—Ç. –ù–∞–ø—Ä–∏–º–µ—Ä, —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞ `/abc|[az][by][0-9]/` —Å–æ —Å—Ç—Ä–æ–∫–æ–π `'ab3'`. –ó–¥–µ—Å—å Irregexp —Å–Ω–∞—á–∞–ª–∞ –ø—ã—Ç–∞–µ—Ç—Å—è —Å–æ–ø–æ—Å—Ç–∞–≤–∏—Ç—å `/abc/` –∏ —Ç–µ—Ä–ø–∏—Ç –Ω–µ—É–¥–∞—á—É –ø–æ—Å–ª–µ –≤—Ç–æ—Ä–æ–≥–æ —Å–∏–º–≤–æ–ª–∞. –ó–∞—Ç–µ–º –æ–Ω –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –Ω–∞ –¥–≤–∞ —Å–∏–º–≤–æ–ª–∞ –∏ —É—Å–ø–µ—à–Ω–æ —Å–æ–ø–æ—Å—Ç–∞–≤–ª—è–µ—Ç –≤—Ç–æ—Ä—É—é –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—É `/[az][by][0-9]/`. –í —à–∞–±–ª–æ–Ω–∞—Ö —Å –∫–≤–∞–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞–º–∏, —Ç–∞–∫–∏–º–∏ –∫–∞–∫ `/(abc)*xyz/`, Irregexp –¥–æ–ª–∂–µ–Ω –≤—ã–±–∏—Ä–∞—Ç—å –ø–æ—Å–ª–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è —Ç–µ–ª–∞, —Å–æ–ø–æ—Å—Ç–∞–≤–ª—è—Ç—å –ª–∏ —Ç–µ–ª–æ —Å–Ω–æ–≤–∞ –∏–ª–∏ –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å —Å –æ—Å—Ç–∞–≤—à–µ–π—Å—è —á–∞—Å—Ç—å—é —à–∞–±–ª–æ–Ω–∞.

–ü–æ–ø—Ä–æ–±—É–µ–º –ø–æ–Ω—è—Ç—å, —á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–∏ `/(a*)*b/` —Å –º–µ–Ω—å—à–µ–π –≤—Ö–æ–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–æ–π, –Ω–∞–ø—Ä–∏–º–µ—Ä, `'aaa'`. –≠—Ç–æ—Ç —à–∞–±–ª–æ–Ω —Å–æ–¥–µ—Ä–∂–∏—Ç –≤–ª–æ–∂–µ–Ω–Ω—ã–µ –∫–≤–∞–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã, —Ç–∞–∫ —á—Ç–æ –º—ã –ø—Ä–æ—Å–∏–º Irregexp —Å–æ–ø–æ—Å—Ç–∞–≤–∏—Ç—å *–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–µ–π* –∏–∑ `'a'`, –∞ –∑–∞—Ç–µ–º —Å–æ–ø–æ—Å—Ç–∞–≤–∏—Ç—å `'b'`. –û—á–µ–≤–∏–¥–Ω–æ, —á—Ç–æ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è –Ω–µ—Ç, —Ç–∞–∫ –∫–∞–∫ –≤—Ö–æ–¥–Ω–∞—è —Å—Ç—Ä–æ–∫–∞ –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç `'b'`. –û–¥–Ω–∞–∫–æ `/(a*)*/` —Å–æ–ø–æ—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è, –∏ –¥–µ–ª–∞–µ—Ç —ç—Ç–æ –º–Ω–æ–≥–∏–º–∏ —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–æ —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ —Å–ø–æ—Å–æ–±–∞–º–∏:

```js
'aaa'           'aa', 'a'           'aa', ''
'a', 'aa'       'a', 'a', 'a'       'a', 'a', ''
‚Ä¶
```

Irregexp –∏–∑–Ω–∞—á–∞–ª—å–Ω–æ –Ω–µ –º–æ–∂–µ—Ç –∏—Å–∫–ª—é—á–∏—Ç—å, —á—Ç–æ –Ω–µ—É–¥–∞—á–∞ —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è –∑–∞–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ–≥–æ `/b/` –≤—ã–∑–≤–∞–Ω–∞ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–º –≤—ã–±–æ—Ä–æ–º —Å–ø–æ—Å–æ–±–∞ —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è `/(a*)*/`, –ø–æ—ç—Ç–æ–º—É –æ–Ω –≤—ã–Ω—É–∂–¥–µ–Ω –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã. –≠—Ç–∞ –ø—Ä–æ–±–ª–µ–º–∞ –∏–∑–≤–µ—Å—Ç–Ω–∞ –∫–∞–∫ ¬´—ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–µ¬ª –∏–ª–∏ ¬´–∫–∞—Ç–∞—Å—Ç—Ä–æ—Ñ–∏—á–µ—Å–∫–æ–µ¬ª –æ–±—Ä–∞—Ç–Ω–æ–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ.

## –†–µ–≥—É–ª—è—Ä–Ω—ã–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è –∫–∞–∫ –∞–≤—Ç–æ–º–∞—Ç—ã –∏ –±–∞–π—Ç–∫–æ–¥

–ß—Ç–æ–±—ã –ø–æ–Ω—è—Ç—å –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –∞–ª–≥–æ—Ä–∏—Ç–º, –∫–æ—Ç–æ—Ä—ã–π –Ω–µ–≤–æ—Å–ø—Ä–∏–∏–º—á–∏–≤ –∫ –∫–∞—Ç–∞—Å—Ç—Ä–æ—Ñ–∏—á–µ—Å–∫–æ–º—É –æ–±—Ä–∞—Ç–Ω–æ–º—É –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—é, –Ω–∞–º –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –∫–æ—Ä–æ—Ç–∫–∏–π —ç–∫—Å–∫—É—Ä—Å —á–µ—Ä–µ–∑ [–∞–≤—Ç–æ–º–∞—Ç—ã](https://en.wikipedia.org/wiki/Nondeterministic_finite_automaton). –ö–∞–∂–¥–æ–µ —Ä–µ–≥—É–ª—è—Ä–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ —ç–∫–≤–∏–≤–∞–ª–µ–Ω—Ç–Ω–æ –∞–≤—Ç–æ–º–∞—Ç—É. –ù–∞–ø—Ä–∏–º–µ—Ä, —Ä–µ–≥—É–ª—è—Ä–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ `/(a*)*b/`, –ø—Ä–∏–≤–µ–¥–µ–Ω–Ω–æ–µ –≤—ã—à–µ, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Å–ª–µ–¥—É—é—â–µ–º—É –∞–≤—Ç–æ–º–∞—Ç—É:

![–ê–≤—Ç–æ–º–∞—Ç, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π `/(a*)*b/`](/_img/non-backtracking-regexp/example-automaton.svg)

–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ –∞–≤—Ç–æ–º–∞—Ç –Ω–µ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è —É–Ω–∏–∫–∞–ª—å–Ω–æ —à–∞–±–ª–æ–Ω–æ–º; —Ç–æ—Ç, –∫–æ—Ç–æ—Ä—ã–π –≤—ã –≤–∏–¥–∏—Ç–µ –≤—ã—à–µ, —Å–æ–∑–¥–∞–µ—Ç—Å—è –º–µ—Ö–∞–Ω–∏—á–µ—Å–∫–∏–º –ø—Ä–æ—Ü–µ—Å—Å–æ–º –ø–µ—Ä–µ–≤–æ–¥–∞ –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –Ω–æ–≤–æ–º –º–µ—Ö–∞–Ω–∏–∑–º–µ RegExp –≤ V8 –¥–ª—è `/(a*)*/`.
–ù–µ–æ–±–æ–∑–Ω–∞—á–µ–Ω–Ω—ã–µ –∫—Ä–∞—è –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—Ç —Å–æ–±–æ–π –ø–µ—Ä–µ—Ö–æ–¥—ã —Å —ç–ø—Å–∏–ª–æ–Ω: –æ–Ω–∏ –Ω–µ –ø–æ—Ç—Ä–µ–±–ª—è—é—Ç –≤–≤–æ–¥. –ü–µ—Ä–µ—Ö–æ–¥—ã —Å —ç–ø—Å–∏–ª–æ–Ω –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã, —á—Ç–æ–±—ã —Ä–∞–∑–º–µ—Ä –∞–≤—Ç–æ–º–∞—Ç–∞ –æ—Å—Ç–∞–≤–∞–ª—Å—è –ø—Ä–∏–º–µ—Ä–Ω–æ —Ä–∞–≤–Ω—ã–º —Ä–∞–∑–º–µ—Ä—É —à–∞–±–ª–æ–Ω–∞. –ü—ã—Ç–∞—Ç—å—Å—è –Ω–∞–∏–≤–Ω–æ —É—Å—Ç—Ä–∞–Ω–∏—Ç—å –ø–µ—Ä–µ—Ö–æ–¥—ã —Å —ç–ø—Å–∏–ª–æ–Ω –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –∫–≤–∞–¥—Ä–∞—Ç–∏—á–Ω–æ–º—É —É–≤–µ–ª–∏—á–µ–Ω–∏—é —á–∏—Å–ª–∞ –ø–µ—Ä–µ—Ö–æ–¥–æ–≤.
–ü–µ—Ä–µ—Ö–æ–¥—ã —Å —ç–ø—Å–∏–ª–æ–Ω —Ç–∞–∫–∂–µ –ø–æ–∑–≤–æ–ª—è—é—Ç –ø–æ—Å—Ç—Ä–æ–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π —Ä–µ–≥—É–ª—è—Ä–Ω–æ–º—É –≤—ã—Ä–∞–∂–µ–Ω–∏—é, –∏–∑ —Å–ª–µ–¥—É—é—â–∏—Ö —á–µ—Ç—ã—Ä–µ—Ö –±–∞–∑–æ–≤—ã—Ö —Ç–∏–ø–æ–≤ —Å–æ—Å—Ç–æ—è–Ω–∏–π:

![–†–µ–≥—É–ª—è—Ä–Ω—ã–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è –±–∞–π—Ç–∫–æ–¥ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏](/_img/non-backtracking-regexp/state-types.svg)

–ó–¥–µ—Å—å –º—ã –∫–ª–∞—Å—Å–∏—Ñ–∏—Ü–∏—Ä—É–µ–º —Ç–æ–ª—å–∫–æ –ø–µ—Ä–µ—Ö–æ–¥—ã *–∏–∑* —Å–æ—Å—Ç–æ—è–Ω–∏—è, –≤ —Ç–æ –≤—Ä–µ–º—è –∫–∞–∫ –ø–µ—Ä–µ—Ö–æ–¥—ã –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –º–æ–≥—É—Ç –±—ã—Ç—å –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã–º–∏. –ê–≤—Ç–æ–º–∞—Ç—ã, –ø–æ—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ —Ç–æ–ª—å–∫–æ –∏–∑ —ç—Ç–∏—Ö —Ç–∏–ø–æ–≤ —Å–æ—Å—Ç–æ—è–Ω–∏–π, –º–æ–≥—É—Ç –±—ã—Ç—å –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω—ã –∫–∞–∫ *–±–∞–π—Ç–∫–æ–¥-–ø—Ä–æ–≥—Ä–∞–º–º—ã*, –≥–¥–µ –∫–∞–∂–¥–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏. –ù–∞–ø—Ä–∏–º–µ—Ä, —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å –¥–≤—É–º—è –ø–µ—Ä–µ—Ö–æ–¥–∞–º–∏ —Å —ç–ø—Å–∏–ª–æ–Ω –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–æ –∫–∞–∫ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è `FORK`.

## –ê–ª–≥–æ—Ä–∏—Ç–º –±—ç–∫—Ç—Ä–µ–∫–∏–Ω–≥–∞

–î–∞–≤–∞–π—Ç–µ –≤–µ—Ä–Ω–µ–º—Å—è –∫ –∞–ª–≥–æ—Ä–∏—Ç–º—É –±—ç–∫—Ç—Ä–µ–∫–∏–Ω–≥–∞, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–º –æ—Å–Ω–æ–≤–∞–Ω Irregexp, –∏ –æ–ø–∏—à–µ–º –µ–≥–æ —Å —Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è –∞–≤—Ç–æ–º–∞—Ç–æ–≤. –ü—Ä–µ–¥–ø–æ–ª–æ–∂–∏–º, –Ω–∞–º –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω –º–∞—Å—Å–∏–≤ –±–∞–π—Ç–∫–æ–¥–∞ `code`, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π —à–∞–±–ª–æ–Ω—É, –∏ –Ω—É–∂–Ω–æ `–ø—Ä–æ–≤–µ—Ä–∏—Ç—å`, —Å–æ–≤–ø–∞–¥–∞–µ—Ç –ª–∏ `input` —Å —ç—Ç–∏–º —à–∞–±–ª–æ–Ω–æ–º. –ü—Ä–µ–¥–ø–æ–ª–æ–∂–∏–º, —á—Ç–æ `code` –≤—ã–≥–ª—è–¥–∏—Ç –ø—Ä–∏–º–µ—Ä–Ω–æ —Ç–∞–∫:

```js
const code = [
  {opcode: 'FORK', forkPc: 4},
  {opcode: 'CONSUME', char: '1'},
  {opcode: 'CONSUME', char: '2'},
  {opcode: 'JMP', jmpPc: 6},
  {opcode: 'CONSUME', char: 'a'},
  {opcode: 'CONSUME', char: 'b'},
  {opcode: 'ACCEPT'}
];
```

–≠—Ç–æ—Ç –±–∞–π—Ç–∫–æ–¥ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —à–∞–±–ª–æ–Ω—É (sticky) `/12|ab/y`. –ü–æ–ª–µ `forkPc` –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ `FORK` —è–≤–ª—è–µ—Ç—Å—è –∏–Ω–¥–µ–∫—Å–æ–º (¬´–ø—Ä–æ–≥—Ä–∞–º–º–Ω—ã–º —Å—á–µ—Ç—á–∏–∫–æ–º¬ª) –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è/–∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏, –≤ –∫–æ—Ç–æ—Ä—É—é –º—ã –º–æ–∂–µ–º –ø–µ—Ä–µ–π—Ç–∏, –∏ –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ –¥–ª—è `jmpPc`. –ò–Ω–¥–µ–∫—Å—ã –Ω–∞—á–∏–Ω–∞—é—Ç—Å—è —Å –Ω—É–ª—è. –ê–ª–≥–æ—Ä–∏—Ç–º –±—ç–∫—Ç—Ä–µ–∫–∏–Ω–≥–∞ —Ç–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –Ω–∞ JavaScript —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º.

```js
let ip = 0; // –ü–æ–∑–∏—Ü–∏—è –≤–≤–æ–¥–∞.
let pc = 0; // –ü—Ä–æ–≥—Ä–∞–º–º–Ω—ã–π —Å—á–µ—Ç—á–∏–∫: –∏–Ω–¥–µ–∫—Å —Å–ª–µ–¥—É—é—â–µ–π –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏.
const stack = []; // –°—Ç—ç–∫ –¥–ª—è –±—ç–∫—Ç—Ä–µ–∫–∏–Ω–≥–∞.
while (true) {
  const inst = code[pc];
  switch (inst.opcode) {
    case 'CONSUME':
      if (ip < input.length && input[ip] === inst.char) {
        // –í–≤–æ–¥ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –æ–∂–∏–¥–∞–µ–º–æ–º—É: –ø—Ä–æ–¥–æ–ª–∂–∞–µ–º.
        ++ip;
        ++pc;
      } else if (stack.length > 0) {
        // –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Å–∏–º–≤–æ–ª –≤–≤–æ–¥–∞, –Ω–æ –º–æ–∂–µ–º –æ—Ç–∫–∞—Ç–∏—Ç—å—Å—è.
        const back = stack.pop();
        ip = back.ip;
        pc = back.pc;
      } else {
        // –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Å–∏–º–≤–æ–ª, –æ—Ç–∫–∞—Ç –Ω–µ–≤–æ–∑–º–æ–∂–µ–Ω.
        return false;
      }
      break;
    case 'FORK':
      // –°–æ—Ö—Ä–∞–Ω—è–µ–º –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—É –¥–ª—è –ø–æ—Å–ª–µ–¥—É—é—â–µ–≥–æ –±—ç–∫—Ç—Ä–µ–∫–∏–Ω–≥–∞.
      stack.push({ip: ip, pc: inst.forkPc});
      ++pc;
      break;
    case 'JMP':
      pc = inst.jmpPc;
      break;
    case 'ACCEPT':
      return true;
  }
}
```

–≠—Ç–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –∑–∞—Ü–∏–∫–ª–∏–≤–∞–µ—Ç—Å—è –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ, –µ—Å–ª–∏ –ø—Ä–æ–≥—Ä–∞–º–º–∞ –±–∞–π—Ç–∫–æ–¥–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç —Ü–∏–∫–ª—ã, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –ø–æ—Ç—Ä–µ–±–ª—è—é—Ç –Ω–∏–∫–∞–∫–æ–π —Å–∏–º–≤–æ–ª, —Ç–æ –µ—Å—Ç—å –µ—Å–ª–∏ –∞–≤—Ç–æ–º–∞—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç —Ü–∏–∫–ª, —Å–æ—Å—Ç–æ—è—â–∏–π —Ç–æ–ª—å–∫–æ –∏–∑ –ø–µ—Ä–µ—Ö–æ–¥–æ–≤ —Å —ç–ø—Å–∏–ª–æ–Ω. –≠—Ç—É –ø—Ä–æ–±–ª–µ–º—É –º–æ–∂–Ω–æ —Ä–µ—à–∏—Ç—å —Å –ø–æ–º–æ—â—å—é –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ –æ–¥–Ω–æ–≥–æ —Å–∏–º–≤–æ–ª–∞. Irregexp –≥–æ—Ä–∞–∑–¥–æ —Å–ª–æ–∂–Ω–µ–µ, —á–µ–º —ç—Ç–∞ –ø—Ä–æ—Å—Ç–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è, –Ω–æ –≤ –∫–æ–Ω–µ—á–Ω–æ–º —Å—á–µ—Ç–µ –æ—Å–Ω–æ–≤–∞–Ω –Ω–∞ —Ç–æ–º –∂–µ –∞–ª–≥–æ—Ä–∏—Ç–º–µ.

## –ê–ª–≥–æ—Ä–∏—Ç–º –±–µ–∑ –±—ç–∫—Ç—Ä–µ–∫–∏–Ω–≥–∞

–ê–ª–≥–æ—Ä–∏—Ç–º –±—ç–∫—Ç—Ä–µ–∫–∏–Ω–≥–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç *–ø–æ–∏—Å–∫—É –≤ –≥–ª—É–±–∏–Ω—É* –∞–≤—Ç–æ–º–∞—Ç–∞: –º—ã –≤—Å–µ–≥–¥–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏—Å—Å–ª–µ–¥—É–µ–º –ø–µ—Ä–≤—É—é –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—É –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ `FORK`, –∞ –∑–∞—Ç–µ–º –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—Å—è –∫–æ –≤—Ç–æ—Ä–æ–π –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–µ, –µ—Å–ª–∏ —ç—Ç–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ. –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –ø–æ–¥—Ö–æ–¥ ‚Äî –∞–ª–≥–æ—Ä–∏—Ç–º –±–µ–∑ –±—ç–∫—Ç—Ä–µ–∫–∏–Ω–≥–∞, –∫–æ—Ç–æ—Ä—ã–π, –Ω–µ—É–¥–∏–≤–∏—Ç–µ–ª—å–Ω–æ, –æ—Å–Ω–æ–≤–∞–Ω –Ω–∞ *–ø–æ–∏—Å–∫–µ –≤ —à–∏—Ä–∏–Ω—É* –∞–≤—Ç–æ–º–∞—Ç–∞. –ó–¥–µ—Å—å –º—ã —É—á–∏—Ç—ã–≤–∞–µ–º –≤—Å–µ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ, –≤ —à–∞–≥–∞—Ö, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö —Ç–µ–∫—É—â–µ–π –ø–æ–∑–∏—Ü–∏–∏ –≤ —Å—Ç—Ä–æ–∫–µ –≤–≤–æ–¥–∞. –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –º—ã –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º —Å–ø–∏—Å–æ–∫ —Ç–µ–∫—É—â–∏—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–π, –∞ –∑–∞—Ç–µ–º –ø—Ä–æ–¥–≤–∏–≥–∞–µ–º –≤—Å–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è, —Å–æ–≤–µ—Ä—à–∞—è –ø–µ—Ä–µ—Ö–æ–¥—ã, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –∫–∞–∂–¥–æ–º—É —Å–∏–º–≤–æ–ª—É –≤–≤–æ–¥–∞. –í–∞–∂–Ω–æ, —á—Ç–æ–±—ã –∏–∑ —Å–ø–∏—Å–∫–∞ —Ç–µ–∫—É—â–∏—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–π —É–¥–∞–ª—è–ª–∏—Å—å –¥—É–±–ª–∏.

–ü—Ä–æ—Å—Ç–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –Ω–∞ JavaScript –≤—ã–≥–ª—è–¥–∏—Ç –ø—Ä–∏–º–µ—Ä–Ω–æ —Ç–∞–∫:

```js
// –ü–æ–∑–∏—Ü–∏—è –≤–≤–æ–¥–∞.
let ip = 0;
// –°–ø–∏—Å–æ–∫ —Ç–µ–∫—É—â–∏—Ö –∑–Ω–∞—á–µ–Ω–∏–π pc –∏–ª–∏ `'ACCEPT'`, –µ—Å–ª–∏ –±—ã–ª –Ω–∞–π–¥–µ–Ω —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π —ç–ª–µ–º–µ–Ω—Ç. –ú—ã –Ω–∞—á–∏–Ω–∞–µ–º —Å
// pc 0 –∏ —Å–ª–µ–¥—É–µ–º –ø–µ—Ä–µ—Ö–æ–¥–∞–º —Å —ç–ø—Å–∏–ª–æ–Ω.
let pcs = followEpsilons([0]);

while (true) {
  // –ú—ã –∑–∞–∫–æ–Ω—á–∏–ª–∏, –µ—Å–ª–∏ –±—ã–ª –Ω–∞–π–¥–µ–Ω —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π —ç–ª–µ–º–µ–Ω—Ç‚Ä¶
  if (pcs === 'ACCEPT') return true;
  // ‚Ä¶–∏–ª–∏ –µ—Å–ª–∏ –º—ã –∏—Å—á–µ—Ä–ø–∞–ª–∏ —Å—Ç—Ä–æ–∫—É –≤–≤–æ–¥–∞.
  if (ip >= input.length) return false;

  // –ü—Ä–æ–¥–æ–ª–∂–∞–µ–º —Ç–æ–ª—å–∫–æ —Å —Ç–µ–º–∏ pc, –∫–æ—Ç–æ—Ä—ã–µ CONSUME –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π —Å–∏–º–≤–æ–ª.
  pcs = pcs.filter(pc => code[pc].char === input[ip]);
  // –ü—Ä–æ–¥–≤–∏–≥–∞–µ–º –æ—Å—Ç–∞–≤—à–∏–µ—Å—è pc –∫ —Å–ª–µ–¥—É—é—â–µ–π –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏.
  pcs = pcs.map(pc => pc + 1);
  // –°–ª–µ–¥—É–µ–º –ø–µ—Ä–µ—Ö–æ–¥–∞–º —Å —ç–ø—Å–∏–ª–æ–Ω.
  pcs = followEpsilons(pcs);

  ++ip;
}
```

–ó–¥–µ—Å—å `followEpsilons` ‚Äî —ç—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä–∞—è –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –ø—Ä–æ–≥—Ä–∞–º–º–Ω—ã—Ö —Å—á–µ—Ç—á–∏–∫–æ–≤ –∏ –≤—ã—á–∏—Å–ª—è–µ—Ç —Å–ø–∏—Å–æ–∫ –ø—Ä–æ–≥—Ä–∞–º–º–Ω—ã—Ö —Å—á–µ—Ç—á–∏–∫–æ–≤ –Ω–∞ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è—Ö `CONSUME`, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –±—ã—Ç—å –¥–æ—Å—Ç–∏–≥–Ω—É—Ç—ã —á–µ—Ä–µ–∑ –ø–µ—Ä–µ—Ö–æ–¥—ã —Å —ç–ø—Å–∏–ª–æ–Ω (—Ç–æ –µ—Å—Ç—å —Ç–æ–ª—å–∫–æ –∏—Å–ø–æ–ª—å–∑—É—è FORK –∏ JMP). –í–æ–∑–≤—Ä–∞—â–µ–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫ –Ω–µ –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å –¥—É–±–ª–µ–π. –ï—Å–ª–∏ –º–æ–∂–Ω–æ –¥–æ—Å—Ç–∏–≥–Ω—É—Ç—å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ `ACCEPT`, —Ñ—É–Ω–∫—Ü–∏—è –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `'ACCEPT'`. –û–Ω–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Ç–∞–∫:

```js
function followEpsilons(pcs) {
  // –ù–∞–±–æ—Ä pc, –∫–æ—Ç–æ—Ä—ã–µ –º—ã –≤–∏–¥–µ–ª–∏ –¥–æ —Å–∏—Ö –ø–æ—Ä.
  const visitedPcs = new Set();
  const result = [];

  while (pcs.length > 0) {
    const pc = pcs.pop();

    // –ú—ã –º–æ–∂–µ–º –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å pc, –µ—Å–ª–∏ –≤–∏–¥–µ–ª–∏ –µ–≥–æ —Ä–∞–Ω—å—à–µ.
    if (visitedPcs.has(pc)) continue;
    visitedPcs.add(pc);

    const inst = code[pc];
    switch (inst.opcode) {
      case 'CONSUME':
        result.push(pc);
        break;
      case 'FORK':
        pcs.push(pc + 1, inst.forkPc);
        break;
      case 'JMP':
        pcs.push(inst.jmpPc);
        break;
      case 'ACCEPT':
        return 'ACCEPT';
    }
  }

  return result;
}
```

–ü–æ—Å–∫–æ–ª—å–∫—É –±–ª–∞–≥–æ–¥–∞—Ä—è —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏—é –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ —Å –ø–æ–º–æ—â—å—é –º–Ω–æ–∂–µ—Å—Ç–≤–∞ `visitedPcs` –º—ã –∑–Ω–∞–µ–º, —á—Ç–æ –∫–∞–∂–¥—ã–π –ø—Ä–æ–≥—Ä–∞–º–º–Ω—ã–π —Å—á–µ—Ç—á–∏–∫ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑ –≤ `followEpsilons`. –≠—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ —Å–ø–∏—Å–æ–∫ `result` –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –¥—É–±–ª–∏–∫–∞—Ç–æ–≤, –∞ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è `followEpsilons` –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–æ —Ä–∞–∑–º–µ—Ä–æ–º –º–∞—Å—Å–∏–≤–∞ `code`, —Ç–æ –µ—Å—Ç—å —Ä–∞–∑–º–µ—Ä–æ–º —à–∞–±–ª–æ–Ω–∞. `followEpsilons` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –º–∞–∫—Å–∏–º—É–º `input.length` —Ä–∞–∑, –ø–æ—ç—Ç–æ–º—É –æ–±—â–µ–µ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è RegExp –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–æ `ùí™(pattern.length * input.length)`.

–ê–ª–≥–æ—Ä–∏—Ç–º –±–µ–∑ –æ–±—Ä–∞—Ç–Ω–æ–≥–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –º–æ–∂–Ω–æ —Ä–∞—Å—à–∏—Ä–∏—Ç—å –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ —Ñ—É–Ω–∫—Ü–∏–π JavaScript RegExp, –Ω–∞–ø—Ä–∏–º–µ—Ä, –≥—Ä–∞–Ω–∏—Ü —Å–ª–æ–≤ –∏–ª–∏ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –≥—Ä–∞–Ω–∏—Ü (–ø–æ–¥)—Å–æ–≤–ø–∞–¥–µ–Ω–∏–π. –ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, –æ–±—Ä–∞—Ç–Ω—ã–µ —Å—Å—ã–ª–∫–∏, –ø—Ä–æ—Å–º–æ—Ç—Ä –≤–ø–µ—Ä–µ–¥ –∏ –Ω–∞–∑–∞–¥ –Ω–µ –º–æ–≥—É—Ç –±—ã—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∞–Ω—ã –±–µ–∑ —Å–µ—Ä—å–µ–∑–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π, –∫–æ—Ç–æ—Ä—ã–µ –∏–∑–º–µ–Ω—è—é—Ç –∞—Å–∏–º–ø—Ç–æ—Ç–∏—á–µ—Å–∫—É—é —Å–ª–æ–∂–Ω–æ—Å—Ç—å –≤ —Ö—É–¥—à–µ–º —Å–ª—É—á–∞–µ.

–ù–æ–≤—ã–π –º–µ—Ö–∞–Ω–∏–∑–º RegExp –≤ V8 –æ—Å–Ω–æ–≤–∞–Ω –Ω–∞ —ç—Ç–æ–º –∞–ª–≥–æ—Ä–∏—Ç–º–µ –∏ –µ–≥–æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –≤ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞—Ö [re2](https://github.com/google/re2) –∏ [Rust regex](https://github.com/rust-lang/regex). –ê–ª–≥–æ—Ä–∏—Ç–º –æ–±—Å—É–∂–¥–∞–µ—Ç—Å—è –≥–æ—Ä–∞–∑–¥–æ –±–æ–ª–µ–µ –ø–æ–¥—Ä–æ–±–Ω–æ, —á–µ–º –∑–¥–µ—Å—å, –≤ –æ—Ç–ª–∏—á–Ω–æ–π [—Å–µ—Ä–∏–∏ –±–ª–æ–≥–æ–≤](https://swtch.com/~rsc/regexp/) –†—É—Å—Å–∞ –ö–æ–∫—Å–∞, –∫–æ—Ç–æ—Ä—ã–π —Ç–∞–∫–∂–µ —è–≤–ª—è–µ—Ç—Å—è –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–º –∞–≤—Ç–æ—Ä–æ–º –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ re2.
